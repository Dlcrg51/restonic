jQuery(document).ready(function($){function pinMattress(mattressSelector){mattressSelector.each(function(){var pinurl=encodeURIComponent(_pinurl),pinmedia=encodeURIComponent(window.location.origin+$(this).attr("src")),alt=encodeURIComponent($(this).attr("alt")),pinterstBrand="//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png",float=$(this).css("float"),position=("width:"+$(this).attr("width")+"px;",$(this).attr("style"),getPosition(float));$(this).wrap('<div class="share-item '+position+'"></div>');var pinterest=buildPinitButton(pinurl,pinmedia,alt,pinterstBrand),shareMarkup='<div class="pinit-btn">';shareMarkup+=pinterest,shareMarkup+="</div>",$(this).before(shareMarkup)})}function addPinit(selector){selector.each(function(){var float=$(this).css("float"),width="width:"+$(this).attr("width")+"px;",style=$(this).attr("style"),position=getPosition(float);$(this).wrap('<div class="share-item '+position+'" style="max-width:'+$(this).attr("width")+"px;"+style+'"></div>'),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);var pinurl=encodeURIComponent(_pinurl),pinmedia=encodeURIComponent(window.location.origin+$(this).attr("src")),alt=encodeURIComponent($(this).attr("alt")),pinterstBrand="//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png",restonicPin="/images/social-icons/pinterest.png",pinButton=buildPinitButton(pinurl,pinmedia,alt,pinterstBrand),pinterest=buildPinitButton(pinurl,pinmedia,alt,restonicPin),facebook=buildFacebookShare(pinurl,pinmedia,alt),tumblr=buildTumblrButton(pinurl,pinmedia,alt),twitter=buildTwitterButton(pinurl),google=buildGoogleButton(pinurl),shareMarkup='<div class="pinit-btn">';shareMarkup+=pinButton,shareMarkup+="</div>",toolbar=buildImageShareToolbar(pinterest,facebook,twitter,tumblr,google,width),$(this).before(shareMarkup),$(this).before(toolbar),$(".share-item").hover(function(){$(".image-share-toolbar",$(this)).removeClass("hidden")},function(){$(".image-share-toolbar",$(this)).addClass("hidden")})})}function getPosition(float){var position="share-img-";return position+="left"==float||"right"==float?float:"left"}function buildImageShareToolbar(pinterest,facebook,twitter,tumblr,google){var shareToolbar='<div class="image-share-toolbar hidden" style="width:100%">';return shareToolbar+=pinterest+twitter+tumblr+google+facebook,shareToolbar+="</div>"}function buildFacebookShare(link,image){var facebookImage='<img src="/images/social-icons/facebook.png" />',facebookLink="";facebookLink+="https://www.facebook.com/dialog/feed?",facebookLink+="app_id=758524240891668",facebookLink+="&display=popup",facebookLink+="&picture="+image,facebookLink+="&href="+link,facebookLink+="&redirect_uri="+link,facebookLink+="&name="+$("meta[property='og:title']").attr("content"),facebookLink+="&description="+$("meta[property='og:description']").attr("content");var facebookMarkup='<a href="'+facebookLink+"\" onclick=\"window.open(this.href, 'facebook-share-dialog', 'width=626,height=436'); return false;\">"+facebookImage+"</a>";return facebookMarkup}function buildPinitButton(link,image,description,pinimg){var pinitMarkup='<a href="http://www.pinterest.com/pin/create/button?';return pinitMarkup+="url="+link,pinitMarkup+="&media="+image,pinitMarkup+="&description="+description,pinitMarkup+='"',pinitMarkup+="onclick=\"javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=320,width=780');return false;\"",pinitMarkup+='data-pin-do="buttonPin" data-pin-config="none">',pinitMarkup+='<img src="'+pinimg+'" />',pinitMarkup+="</a>"}function buildTwitterButton(link){var twitterImage='<img src="/images/social-icons/twitter.png" />',twitterMarkup='<a href="https://twitter.com/intent/tweet?';return twitterMarkup+="text="+$.trim($(".itemTitle").text()),twitterMarkup+="&url="+link,twitterMarkup+="&hashtags=sleepBlog",twitterMarkup+="&via=restonicbeds",twitterMarkup+='">'+twitterImage+"</a>"}function buildTumblrButton(link,image,description){var tumblrImage='<img src="/images/social-icons/tumblr.png" />',tumblrMarkup='<a href="http://www.tumblr.com/share/photo?';return tumblrMarkup+="source="+image,tumblrMarkup+="&caption="+description,tumblrMarkup+="&clickthru="+link,tumblrMarkup+='" title="Share on Tumblr">',tumblrMarkup+=tumblrImage+"</a>"}function buildGoogleButton(link){var googleImage='<img src="/images/social-icons/googleplus.png" />',googleMarkup='<a href="https://plus.google.com/share?';return googleMarkup+="url="+link+'"',googleMarkup+="onclick=\"javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;\">",googleMarkup+=googleImage+"</a>"}var blog=$(".itemFullText img"),mattresses=$(".mattress-item-image img"),toolbar=$(".share-item");addPinit(blog),pinMattress(mattresses)});